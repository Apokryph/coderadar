= coderadar REST API
v{version}, Tom Hombergs, {date}
:doctype: book
:icons: font
:source-highlighter: highlightjs
:toc: left
:toclevels: 2
:sectlinks:

[introduction]
= Introduction
The coderadar server is a tool for continuous source code analysis. To start analysis of your project,
you only have to provide a few configuration parameters and let coderadar do the work. This document
describes the REST API of the coderadar server.

= Resources

== Project
A project defines some metadata about the project you want coderadar to analyze. With a project resource
and its sub-resources you provide coderadar with the information it needs to analyze the source code.

=== Structure
include::{snippets}/projects/create/request-fields.adoc[]

=== Hypermedia Links
include::{snippets}/projects/create/links.adoc[]

=== Listing Projects

==== Example Request
include::{snippets}/projects/list/http-request.adoc[]

==== Example Response
include::{snippets}/projects/list/http-response.adoc[]

=== Creating a Project

==== Example Request
include::{snippets}/projects/create/http-request.adoc[]

==== Example Response
include::{snippets}/projects/create/http-response.adoc[]

=== Updating a Project

==== Example Request
include::{snippets}/projects/update/http-request.adoc[]

==== Example Response
include::{snippets}/projects/update/http-response.adoc[]

=== Deleting a Project

==== Example Request
include::{snippets}/projects/delete/http-request.adoc[]

==== Example Response
include::{snippets}/projects/delete/http-response.adoc[]


== File Patterns
A file pattern describes a set of files within a project's code base. Each project can have several file patterns
defined. Each file pattern belongs to a certain file set, the most important of which is the SOURCE file set that
is supposed to contain all source code files of your project.

File patterns may either define a pattern for files to be INCLUDED or files to be EXCLUDED. To compile the list of files
contained in a certain file set (like the SOURCE file set), coderadar will first apply all INCLUDE patterns of that file set and then apply all EXCLUDE
patterns. Thus, the file set will include all INCLUDED files except those that were part of an EXCLUDE pattern.

=== Structure
include::{snippets}/filepatterns/create-update/request-fields.adoc[]

=== Hypermedia Links
include::{snippets}/filepatterns/create-update/links.adoc[]

=== Listing a Project's File Patterns

==== Example Request
include::{snippets}/filepatterns/get/http-request.adoc[]

==== Example Response
include::{snippets}/filepatterns/get/http-response.adoc[]

=== Setting a Project's File Patterns
Coderadar views a project's list of file patterns as a single resource. Hence, you can only list and save
all file patterns of a project at once.

==== Example Request
include::{snippets}/filepatterns/create-update/http-request.adoc[]

==== Example Response
include::{snippets}/filepatterns/create-update/http-response.adoc[]

== Analyzer Configuration

Coderadar has a plugin system for source code analyzers so you can implement your own analyzers that produce the metrics
you need (or you can use the analyzer plugins that are shipped with coderadar). For each project, you can configure each analyzer
plugin via the AnalyzerConfiguration resource.

=== Structure
include::{snippets}/analyzerConfiguration/post/request-fields.adoc[]

=== Hypermedia Links
include::{snippets}/analyzerConfiguration/post/links.adoc[]

=== Adding an Analyzer Configuration

==== Example Request
include::{snippets}/analyzerConfiguration/post/http-request.adoc[]

==== Example Response
include::{snippets}/analyzerConfiguration/post/http-response.adoc[]

=== Deleting an Analyzer Configuration

==== Example Request
include::{snippets}/analyzerConfiguration/delete/http-request.adoc[]

==== Example Response
include::{snippets}/analyzerConfiguration/delete/http-response.adoc[]

=== Updating an Analyzer Configuration

==== Example Request
include::{snippets}/analyzerConfiguration/update/http-request.adoc[]

==== Example Response
include::{snippets}/analyzerConfiguration/update/http-response.adoc[]

=== Listing a Project's Analyzer Configurations

==== Example Request
include::{snippets}/analyzerConfiguration/get/http-request.adoc[]

==== Example Response
include::{snippets}/analyzerConfiguration/get/http-response.adoc[]

=== Loading a single Analyzer Configuration

==== Example Request
include::{snippets}/analyzerConfiguration/getSingle/http-request.adoc[]

==== Example Response
include::{snippets}/analyzerConfiguration/getSingle/http-response.adoc[]

== Analyzer Configuration File

An AnalyzerConfiguration can be supplied with a configuration file. For example, the Checkstyle analyzer
can be supplied with a checkstyle configuration xml file to define which rules to check. The content of
the configuration file can be text, xml, or even a binary format, depending on the configuration format
the analyzer needs.

=== Uploading an Analyzer Configuration File

==== Example Request
include::{snippets}/analyzerConfigurationFile/upload/http-request.adoc[]

==== Example Response
include::{snippets}/analyzerConfigurationFile/upload/http-response.adoc[]


=== Downloading an Analyzer Configuration File
==== Example Request
include::{snippets}/analyzerConfigurationFile/download/http-request.adoc[]

==== Example Response
include::{snippets}/analyzerConfigurationFile/download/http-response.adoc[]

== Analyzing Strategy
An Analyzing Strategy defines which commits of a project are to be analyzed. If there is no active
Analyzing Strategy present for a project, no analysis will be performed at all. Once you provide
an Analyzing Strategy, analysis jobs will be queued automatically for the commits defined within the strategy.

=== Structure
include::{snippets}/strategy/create-update/request-fields.adoc[]

=== Hypermedia Links
include::{snippets}/strategy/create-update/links.adoc[]

=== Setting a Project's Analyzing Strategy

==== Example Request
include::{snippets}/strategy/create-update/http-request.adoc[]

==== Example Response
include::{snippets}/strategy/create-update/http-response.adoc[]

=== Getting a Project's Analyzing Strategy

==== Example Request
include::{snippets}/strategy/get/http-request.adoc[]

==== Example Response
include::{snippets}/strategy/get/http-response.adoc[]

== Commit
The Commit resource contains some metadata about a commit to your project's version control system.
Commits are a read-only resource since the commit metadata is automatically gathered by the coderadar server.

=== Structure
include::{snippets}/commit/list/response-fields.adoc[]

=== Hypermedia Links
include::{snippets}/commit/list/links.adoc[]

=== Listing a Project's Commits

==== Example Request
include::{snippets}/commit/list/http-request.adoc[]

==== Example Response
include::{snippets}/commit/list/http-response.adoc[]

= Error Handling

== Successful Requests
Successful requests return a response with HTTP status 200 (OK) and contain a JSON structure in the response
body if applicable.

== Validation Errors
POST requests against the coderadar API usually expect a JSON structure in the request body. If the JSON structure
contains values that are invalid, the API returns a response with HTTP status 400 (bad request) that contains
an error JSON structure object that looks like this:

include::{snippets}/projects/create/error400/http-response.adoc[]
include::{snippets}/projects/create/error400/response-fields.adoc[]

== General Errors
If some unexpected error occurs during the processing of a request, the API returns a response with HTTP status 500
(internal server error).



